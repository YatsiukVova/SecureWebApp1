# SecureWebApp: ะะตะผะพะฝัััะฐััะนะฝะธะน ะฟัะพัะบั ะดะปั ะบะฒะฐะปัััะบะฐััะนะฝะพั ัะพะฑะพัะธ

ะฆะตะน ะฟัะพัะบั ั ะฟัะฐะบัะธัะฝะพั ัะตะฐะปัะทะฐัััั ะดะปั ะบะฒะฐะปัััะบะฐััะนะฝะพั ัะพะฑะพัะธ ะฝะฐ ัะตะผั **"ะะฝัะตะณัะฐััั ัััะฐัะฝะธั ะผะตัะพะดัะฒ ะฑะตะทะฟะตะบะธ ั ะฒะตะฑ-ะดะพะดะฐัะบะฐั: ะฐะฒัะตะฝัะธััะบะฐััั, ัะธัััะฒะฐะฝะฝั ัะฐ ัะฟัะฐะฒะปัะฝะฝั ะดะพัััะฟะพะผ"**.

ะัะพัะบั ั ะฒะตะฑ-API, ัะพะทัะพะฑะปะตะฝะธะผ ะฝะฐ ASP.NET Core 8, ัะฐ ะดะตะผะพะฝััััั ะบะพะผะฟะปะตะบัะฝะธะน ะฟัะดััะด ะดะพ ะทะฐัะธััั ัััะฐัะฝะธั ะฒะตะฑ-ะดะพะดะฐัะบัะฒ.

##  ะะตะฐะปัะทะพะฒะฐะฝั ะผะตัะฐะฝัะทะผะธ ะฑะตะทะฟะตะบะธ

-   **ะะฒัะตะฝัะธััะบะฐััั:**
    -   ะะตะฐะปัะทะพะฒะฐะฝะฐ ัะธััะตะผะฐ ัะตััััะฐััั ัะฐ ะฒัะพะดั ะบะพัะธัััะฒะฐััะฒ ะฝะฐ ะฑะฐะทั **ASP.NET Core Identity**.
    -   ะะธะบะพัะธััะพะฒัััััั ะฐะฒัะตะฝัะธััะบะฐััั ะฝะฐ ะพัะฝะพะฒั **JWT (JSON Web Tokens)** ะดะปั ะทะฐัะธััั API.
-   **ะะฐะณะฐัะพัะฐะบัะพัะฝะฐ ะฐะฒัะตะฝัะธััะบะฐััั (MFA/2FA):**
    -   ะะฝัะตะณัะพะฒะฐะฝะพ ะฟัะดััะธะผะบั **TOTP (Time-based One-Time Password)** ะท ะฒะธะบะพัะธััะฐะฝะฝัะผ ะดะพะดะฐัะบัะฒ-ะฐะฒัะตะฝัะธััะบะฐัะพััะฒ (Google Authenticator, Authy ัะพัะพ).
-   **ะฃะฟัะฐะฒะปัะฝะฝั ะดะพัััะฟะพะผ (ะะฒัะพัะธะทะฐััั):**
    -   ะะตะฐะปัะทะพะฒะฐะฝะพ **ัะพะปัะพะฒั ะผะพะดะตะปั ะดะพัััะฟั (RBAC)** ะท ัะพะปัะผะธ "User" ัะฐ "Admin".
    -   ะกัะฒะพัะตะฝะพ **ะบะฐััะพะผะฝั ะฟะพะปััะธะบั ะฐะฒัะพัะธะทะฐััั** (MfaRequiredPolicy), ัะบะฐ ะฒะธะผะฐะณะฐั ะฒัะด ะบะพัะธัััะฒะฐัะฐ ัะฒัะผะบะฝะตะฝะพั MFA ะดะปั ะดะพัััะฟั ะดะพ ะบัะธัะธัะฝะธั ะตะฝะดะฟะพัะฝััะฒ (ะฝะฐะฟัะธะบะปะฐะด, ะบะตััะฒะฐะฝะฝั ะฑะฐะฝะบัะฒััะบะธะผะธ ะบะฐััะบะฐะผะธ).
-   **ะจะธัััะฒะฐะฝะฝั:**
    -   **ะจะธัััะฒะฐะฝะฝั ะดะฐะฝะธั ะฟัะด ัะฐั ะฟะตัะตะดะฐัั** ะทะฐะฑะตะทะฟะตััััััั ะฒะธะบะพัะธััะฐะฝะฝัะผ **HTTPS**.
    -   **ะจะธัััะฒะฐะฝะฝั ะดะฐะฝะธั ั ััะฐะฝั ัะฟะพะบะพั** ัะตะฐะปัะทะพะฒะฐะฝะพ ะฝะฐ ััะฒะฝั ะดะพะดะฐัะบั ะทะฐ ะดะพะฟะพะผะพะณะพั **ASP.NET Core Data Protection API** ะดะปั ะทะฐัะธััั ัััะปะธะฒะธั ะดะฐะฝะธั (ะฝะพะผะตัะธ ะฑะฐะฝะบัะฒััะบะธั ะบะฐััะพะบ) ะฟะตัะตะด ะทะฑะตัะตะถะตะฝะฝัะผ ั ะฑะฐะทั ะดะฐะฝะธั.

## ะขะตัะฝะพะปะพะณััะฝะธะน ััะตะบ

-   **ะะปะฐััะพัะผะฐ:** .NET 8
-   **ะคัะตะนะผะฒะพัะบ:** ASP.NET Core 8 Web API
-   **ะะพะฑะพัะฐ ะท ะดะฐะฝะธะผะธ:** Entity Framework Core 8
-   **ะะฐะทะฐ ะดะฐะฝะธั:** Microsoft SQL Server (LocalDB)
-   **ะะฒัะตะฝัะธััะบะฐััั:** ASP.NET Core Identity, JWT Bearer
-   **ะขะตัััะฒะฐะฝะฝั API:** Swagger (OpenAPI)

## ะะฐะปะฐัััะฒะฐะฝะฝั ัะฐ ะทะฐะฟััะบ

### ะะธะผะพะณะธ:

-   Visual Studio 2022 (ะฐะฑะพ ะฝะพะฒััะต) ะท ัะพะฑะพัะธะผ ะฝะฐะฒะฐะฝัะฐะถะตะฝะฝัะผ "ASP.NET and web development".
-   .NET 8 SDK.
-   SQL Server Express LocalDB (ะทะฐะทะฒะธัะฐะน ะฒััะฐะฝะพะฒะปัััััั ัะฐะทะพะผ ะท Visual Studio).

### ะัะพะบะธ ะดะปั ะทะฐะฟััะบั:

1.  **ะะปะพะฝัะนัะต ัะตะฟะพะทะธัะพััะน:**
    
bash
    git clone [https://github.com/YatsiukVova/SecureWebApp1.git](https://github.com/YatsiukVova/SecureWebApp1.git)
    cd SecureWebApp

2.  **ะัะดะบัะธะนัะต ะฟัะพัะบั** ั Visual Studio, ะฒัะดะบัะธะฒัะธ ัะฐะนะป SecureWebApp.sln.

3.  **ะะฐะปะฐัััะนัะต appsettings.json:**
    -   ะะตัะตะฒัััะต ััะดะพะบ ะฟัะดะบะปััะตะฝะฝั ะดะพ ะฑะฐะทะธ ะดะฐะฝะธั ั ัะตะบััั ConnectionStrings. ะกัะฐะฝะดะฐััะฝะธะน ััะดะพะบ ะดะปั LocalDB ะฒะถะต ะฝะฐะปะฐััะพะฒะฐะฝะพ.
    -   ะฃ ัะตะบััั JWT ะฒะบะฐะถััั ะฒะฐั ValidAudience, ValidIssuer (URL, ะฝะฐ ัะบะพะผั ะทะฐะฟััะบะฐััััั ะดะพะดะฐัะพะบ) ัะฐ ะทะณะตะฝะตััะนัะต ะฝะฐะดัะนะฝะธะน Secret.

4.  **ะกัะฒะพัััั ะฑะฐะทั ะดะฐะฝะธั:**
    -   ะฃ Visual Studio ะฒัะดะบัะธะนัะต "ะะพะฝัะพะปั ะดะธัะฟะตััะตัะฐ ะฟะฐะบะตััะฒ" (Tools -> NuGet Package Manager -> Package Manager Console).
    -   ะะธะบะพะฝะฐะนัะต ะบะพะผะฐะฝะดั:
        
powershell
       
    -    Update-Database
    
ะฆั ะบะพะผะฐะฝะดะฐ ััะฒะพัะธัั ะฑะฐะทั ะดะฐะฝะธั ัะฐ ะฒัั ะฝะตะพะฑััะดะฝั ัะฐะฑะปะธัั ะฝะฐ ะพัะฝะพะฒั ััะฝัััะธั ะผัะณัะฐััะน.
5.  **ะะฐะฟัััััั ะดะพะดะฐัะพะบ:**
    -   ะะฐัะธัะฝััั F5 ะฐะฑะพ ะทะตะปะตะฝั ะบะฝะพะฟะบั "โถ SecureWebApp" ั ะฒะตััะฝัะน ะฟะฐะฝะตะปั Visual Studio.
    -   ะัะดะบัะธััััั ะฑัะฐัะทะตั ะทั ััะพััะฝะบะพั Swagger UI, ะดะต ะฒะธ ะทะผะพะถะตัะต ัะตัััะฒะฐัะธ API.
SecureWebApp/
โ
โโโ ๐ Authorization/
โ   โโโ MfaRequiredHandler.cs      # ะะฑัะพะฑะฝะธะบ, ัะพ ะฟะตัะตะฒัััั, ัะธ ัะฒัะผะบะฝะตะฝะพ MFA
โ   โโโ MfaRequiredRequirement.cs  # ะะปะฐั-ะผะฐัะบะตั ะดะปั ะฟะพะปััะธะบะธ MFA
โ
โโโ ๐ Controllers/
โ   โโโ AuthController.cs          # ะะตััั ัะตััััะฐัััั, ะฒัะพะดะพะผ, MFA
โ   โโโ CardsController.cs         # ะะตััั ะฑะฐะฝะบัะฒััะบะธะผะธ ะบะฐััะบะฐะผะธ (ะท ัะธัััะฒะฐะฝะฝัะผ)
โ   โโโ DataController.cs          # ะะตะผะพะฝััััั ะดะพัััะฟ ะทะฐ ัะพะปัะผะธ
โ
โโโ ๐ Data/
โ   โโโ ApplicationDbContext.cs    # ะะพะฝัะตะบัั ะฑะฐะทะธ ะดะฐะฝะธั (EF Core)
โ
โโโ ๐ Migrations/
โ   โโโ ... (ัะฐะนะปะธ ะผัะณัะฐััะน ะฑะฐะทะธ ะดะฐะฝะธั)
โ
โโโ ๐ Models/
โ   โโโ DTO/                     # Data Transfer Objects
โ   โ   โโโ AddCardRequest.cs
โ   โ   โโโ CardViewModel.cs
โ   โ   โโโ EnableMfaResponse.cs
โ   โ   โโโ LoginMfaModel.cs
โ   โ   โโโ LoginModel.cs
โ   โ   โโโ LoginResponse.cs
โ   โ   โโโ RegisterModel.cs
โ   โ   โโโ VerifyMfaModel.cs
โ   โ
โ   โโโ ApplicationUser.cs       # ะะพะทัะธัะตะฝะฐ ะผะพะดะตะปั ะบะพัะธัััะฒะฐัะฐ Identity
โ   โโโ BankCard.cs              # ะะพะดะตะปั ะฑะฐะฝะบัะฒััะบะพั ะบะฐััะบะธ
โ
โโโ ๐ Properties/
โ   โโโ launchSettings.json      # ะะฐะปะฐัััะฒะฐะฝะฝั ะทะฐะฟััะบั ะฟัะพัะบัั
โ
โโโ appsettings.json               # ะะพะฝััะณััะฐััั ะดะพะดะฐัะบะฐ (ะะ, JWT)
โโโ Program.cs                     # ะะพะปะพะฒะฝะธะน ัะฐะนะป (ะบะพะฝััะณััะฐััั ัะตัะฒัััะฒ, middleware)
โโโ SecureWebApp.csproj            # ะคะฐะนะป ะฟัะพัะบัั (ะทะฐะปะตะถะฝะพััั, NuGet-ะฟะฐะบะตัะธ)
